{% extends "rideshare/layout.html" %}

{% block content %}
<div id="page_set_location">
    <a href="/main_screen">
        <button class="btn btn-light btn-round">
            <i class="fas fa-chevron-left"></i>
        </button>
    </a>
    <h3>
        Where can we take you?
    </h3>
    <div class="location_setter">
        <form action="/set_location/" method="post">
            {% csrf_token %}
            <div class="input-group">
                <div class="input-group-prepend">
                    <div class="input-group-text">
                        start
                    </div>
                </div>
                <input
                        name="start_name"
                        value="{{ start_name }}"
                        type="text" class="form-control"
                        id="start_name"
                        onkeypress="start_keypress()"/>
            </div>
            <input
                    name="start_address"
                    value="{{ start_address }}"
                    type="text" class="form-control"/>
            <input
                    name="start_place_id"
                    value="{{ start_place_id }}"
                    type="text" class="form-control"/>
            <div class="input-group mt-2">
                <div class="input-group-prepend">
                    <div class="input-group-text">
                        end
                    </div>
                </div>
                <input
                        name="end_name"
                        value="{{ end_name }}"
                        type="text" class="form-control"
                        onkeypress="end_keypress()"/>
            </div>
            <input
                    name="end_address"
                    value="{{ end_address }}"
                    type="text" class="form-control"/>
            <input
                    name="end_place_id"
                    value="{{ end_place_id }}"
                    type="text" class="form-control"/>
            <br>
            {% if error != "" %}
            <div class="alert alert-danger my-3">
                {{ error }}
            </div>
            {% endif %}
            <button type="submit" class="btn btn-round mt-3 float-right">
                done
            </button>
        </form>
    </div>
    <div id="location_suggestions" class="m-3">
        <p>
            <i class="fas fa-map-marker-alt"></i>
            Set on map
        </p>
        <p>
            <i class="fas fa-map-marker-alt"></i>
            Work
        </p>
        <p>
            <i class="fas fa-map-marker-alt"></i>
            Home
        </p>
    </div>
    <h3>
        When can we take you there?
    </h3>
    <div class="input-group">
        <div class="input-group-prepend">
            <div class="input-group-text">
                <i class="fas fa-calendar-alt"></i>
            </div>
        </div>
        <input type="text" class="form-control">
        <div class="input-group-append">
            <div class="input-group-text">
                <i class="fas fa-chevron-down"></i>
            </div>
        </div>
    </div>
    <div class="input-group date inactive" id="datetimepicker12" data-target-input="nearest">
        <input type="text"
            data-target="#datetimepicker12"
            style="display: none;"
            class="form-control datetimepicker-input mb-3 form-control-sm text-center text-primary h3">
    </div>
</div>

<script>
function showPosition(position) {
    console.log("SHOW POSITION");
    var lat = position.coords.latitude;
    var lng = position.coords.longitude;
    console.log(lat + ":" + lng);
}
start_keypress = function() {
    console.log("START KEYPRESS");
    $.ajax({
        method: "POST",
        url: "/set_location/",
        data: {
            "input": "start_name",
            "value": $("#start_name").val(),
        },
        success: function(resp) {
            console.log("AJAX SUCCESS:");
            console.log(resp);
        },
        error: function(resp) {
            console.log("AJAX ERROR:");
            console.log(resp.responseText);
        },
    });
}
end_keypress = function() {
    console.log("END KEYPRESS");
}
window.onload = function() {
    var dt = new Date();
    jQuery('#datetimepicker12').datetimepicker({
        defaultDate: new Date(dt.getTime()),
        inline: true,
        sideBySide: true,
    });
}
</script>
{% endblock %}
